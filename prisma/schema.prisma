datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model LeadAnalysis {
  id                    String   @id @default(uuid())
  requestedAmount       Float
  industry              String
  creditScore           Int?
  underwritingReadiness String?
  fundingProbability    Float
  expectedCommission    Float
  riskLevel             String
  recommendedAction     String
  createdAt             DateTime @default(now())
}

model CallOutcome {
  id           String   @id @default(uuid())
  leadId       String
  outcome      String
  booked       Boolean
  funded       Boolean?
  fundedAmount Float?
  createdAt    DateTime @default(now())
}

model PerformanceMetric {
  id            String   @id @default(uuid())
  category      String
  key           String
  successRate   Float
  avgCommission Float
  updatedAt     DateTime @updatedAt

  @@unique([category, key], name: "category_key")
}

model CallQueue {
  id        String   @id @default(uuid())
  leadId    String
  priority  Int
  status    String   @default("pending")
  createdAt DateTime @default(now())
}


model ConversationLog {
  id                String   @id @default(uuid())
  leadId            String?
  transcript        String
  extractedRevenue  Float?
  extractedAmount   Float?
  extractedIndustry String?
  urgencyLevel      String?
  bookingIntent     Boolean
  escalated         Boolean
  createdAt         DateTime @default(now())
}
